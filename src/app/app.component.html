<div class="game-container">
  <!-- Pantalla de Explicación -->
  <div *ngIf="pantallaActual === 'explicacion'" class="explicacion-screen">
    <div class="header">
      <h1>🏆 BATALLA ÉPICA 🏆</h1>
      <h2>PayPal vs Visa Checkout</h2>
    </div>
    
    <div class="comparison-container">
      <div class="comparison-table">
        <h3>📊 Comparación de las Empresas</h3>
        <table>
          <thead>
            <tr>
              <th>Aspecto</th>
              <th class="paypal-col">PayPal</th>
              <th class="visa-col">Visa Checkout</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Origen</strong></td>
              <td>Fundada en 1998 como fintech independiente</td>
              <td>Lanzada en 2014 por Visa</td>
            </tr>
            <tr>
              <td><strong>Enfoque</strong></td>
              <td>Método de pago digital independiente</td>
              <td>Facilitador de pagos con tarjeta Visa</td>
            </tr>
            <tr>
              <td><strong>Ecosistema</strong></td>
              <td>Propio: billetera digital, P2P, integración global</td>
              <td>Limitado: dependía de bancos y comercios</td>
            </tr>
            <tr>
              <td><strong>Facilidad</strong></td>
              <td>Solo correo electrónico y cuenta</td>
              <td>Registrar tarjeta, más pasos</td>
            </tr>
            <tr>
              <td><strong>Alcance</strong></td>
              <td>Global, millones de comercios</td>
              <td>Limitado, principalmente EE.UU.</td>
            </tr>
            <tr>
              <td><strong>Confianza</strong></td>
              <td>Sinónimo de seguridad en internet</td>
              <td>Sin diferencial de seguridad</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <div class="why-paypal-won">
        <h3>🎯 ¿Por qué PayPal ganó?</h3>
        <ul>
          <li>✅ Resolvió un problema real: desconfianza con tarjetas online</li>
          <li>✅ Independencia y universalidad</li>
          <li>✅ Efecto red tempranero con eBay</li>
          <li>✅ Marca fuerte en confianza digital</li>
        </ul>
        
        <h3>❌ ¿Por qué Visa Checkout perdió?</h3>
        <ul>
          <li>❌ Sin diferenciador real</li>
          <li>❌ Llegó tarde al mercado</li>
          <li>❌ No logró efecto red</li>
          <li>❌ Competencia con otros botones de pago</li>
        </ul>
      </div>
    </div>
    
    <button class="btn-primary" (click)="siguientePantalla()">
      🎮 ¡EMPEZAR LA BATALLA!
    </button>
  </div>

  <!-- Pantalla de Ruleta -->
  <div *ngIf="pantallaActual === 'ruleta'" class="ruleta-screen">
    <div class="header">
      <h1>🎯 ASIGNACIÓN DE EQUIPOS</h1>
      <p>La ruleta decidirá tu equipo en esta batalla épica</p>
    </div>
    
    <div class="ruleta-container">
      <div class="ruleta" [class.girando]="ruletaGirando">
        <div class="ruleta-inner">
          <div class="sector paypal-sector">
            <span>PayPal</span>
            <span class="color-indicator azul"></span>
          </div>
          <div class="sector visa-sector">
            <span>Visa Checkout</span>
            <span class="color-indicator rojo"></span>
          </div>
        </div>
        <div class="ruleta-pointer"></div>
      </div>
      
      <button 
        class="btn-ruleta" 
        (click)="girarRuleta()" 
        [disabled]="ruletaGirando">
        {{ ruletaGirando ? 'Girando...' : '🎯 GIRAR RULETA' }}
      </button>
    </div>
    
    <div *ngIf="equipoAsignado" class="equipo-asignado">
      <h2>¡Tu equipo es:</h2>
      <div class="equipo-card" [class]="'equipo-' + equipoAsignado.color">
        <h3>{{ equipoAsignado.nombre }}</h3>
        <div class="color-badge" [class]="equipoAsignado.color"></div>
      </div>
      <button class="btn-primary" (click)="siguientePantalla()">
        🚀 ¡COMENZAR TRIVIA!
      </button>
    </div>
  </div>

  <!-- Pantalla de Trivia -->
  <div *ngIf="pantallaActual === 'trivia'" class="trivia-screen">
    <div class="trivia-header">
      <div class="equipo-info">
        <h3>Equipo: {{ equipoAsignado?.nombre }}</h3>
        <div class="puntos">Puntos: {{ equipoAsignado?.puntos }}</div>
      </div>
      <div class="progreso">
        Pregunta {{ preguntaActual + 1 }} de {{ preguntas.length }}
        <div class="progress-bar">
          <div class="progress-fill" [style.width.%]="((preguntaActual + 1) / preguntas.length) * 100"></div>
        </div>
      </div>
    </div>
    
    <div class="pregunta-container">
      <h2>{{ preguntas[preguntaActual].pregunta }}</h2>
      
      <div class="opciones">
        <button 
          *ngFor="let opcion of preguntas[preguntaActual].opciones; let i = index"
          class="opcion-btn"
          [class.selected]="respuestaSeleccionada === i"
          [class.correct]="mostrarExplicacion && i === preguntas[preguntaActual].respuestaCorrecta"
          [class.incorrect]="mostrarExplicacion && respuestaSeleccionada === i && i !== preguntas[preguntaActual].respuestaCorrecta"
          (click)="seleccionarRespuesta(i)"
          [disabled]="respuestaSeleccionada !== null">
          {{ opcion }}
        </button>
      </div>
      
      <div *ngIf="mostrarExplicacion" class="explicacion">
        <h4>💡 Explicación:</h4>
        <p>{{ preguntas[preguntaActual].explicacion }}</p>
        <div *ngIf="respuestaSeleccionada === preguntas[preguntaActual].respuestaCorrecta" class="correcto">
          ✅ ¡Correcto! +10 puntos
        </div>
        <div *ngIf="respuestaSeleccionada !== preguntas[preguntaActual].respuestaCorrecta" class="incorrecto">
          ❌ Incorrecto. La respuesta correcta era: {{ preguntas[preguntaActual].opciones[preguntas[preguntaActual].respuestaCorrecta] }}
        </div>
        <button class="btn-primary" (click)="siguientePregunta()">
          {{ preguntaActual < preguntas.length - 1 ? 'Siguiente Pregunta' : 'Ver Resultados' }}
        </button>
      </div>
    </div>
  </div>

  <!-- Pantalla de Resultados -->
  <div *ngIf="pantallaActual === 'resultado'" class="resultado-screen">
    <div class="header">
      <h1>🏆 RESULTADOS FINALES 🏆</h1>
    </div>
    
    <div class="resultados-container">
      <div class="equipo-resultado" *ngFor="let equipo of equipos">
        <div class="equipo-card" [class]="'equipo-' + equipo.color">
          <h3>{{ equipo.nombre }}</h3>
          <div class="puntos-finales">{{ equipo.puntos }} puntos</div>
          <div class="color-badge" [class]="equipo.color"></div>
        </div>
      </div>
    </div>
    
    <div class="ganador" *ngIf="equipoGanador">
      <h2>🎉 ¡{{ equipoGanador.nombre }} GANA! 🎉</h2>
      <div class="trophy">🏆</div>
    </div>
    
    <div class="empate" *ngIf="!equipoGanador">
      <h2>🤝 ¡EMPATE! 🤝</h2>
      <p>Ambos equipos demostraron gran conocimiento</p>
    </div>
    
    <button class="btn-primary" (click)="reiniciarJuego()">
      🔄 Jugar de Nuevo
    </button>
  </div>
</div>

<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
  }

  .game-container {
    min-height: 100vh;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .header {
    text-align: center;
    margin-bottom: 30px;
  }

  .header h1 {
    font-size: 3rem;
    color: #fff;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    margin-bottom: 10px;
  }

  .header h2 {
    font-size: 1.5rem;
    color: #f0f0f0;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  }

  /* Pantalla de Explicación */
  .explicacion-screen {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    padding: 40px;
    max-width: 1000px;
    width: 100%;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  }

  .comparison-container {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 30px;
    margin-bottom: 30px;
  }

  .comparison-table h3 {
    color: #333;
    margin-bottom: 20px;
    font-size: 1.5rem;
  }

  .comparison-table table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }

  .comparison-table th {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 15px;
    text-align: left;
    font-weight: bold;
  }

  .comparison-table td {
    padding: 15px;
    border-bottom: 1px solid #eee;
  }

  .comparison-table tr:nth-child(even) {
    background: #f8f9fa;
  }

  .paypal-col {
    background: linear-gradient(135deg, #0070ba, #009cde) !important;
    color: white !important;
  }

  .visa-col {
    background: linear-gradient(135deg, #1a1f71, #ff6b35) !important;
    color: white !important;
  }

  .why-paypal-won h3 {
    color: #333;
    margin-bottom: 15px;
    font-size: 1.3rem;
  }

  .why-paypal-won ul {
    list-style: none;
    padding: 0;
  }

  .why-paypal-won li {
    padding: 8px 0;
    font-size: 1rem;
    line-height: 1.4;
  }

  .btn-primary {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    padding: 15px 30px;
    font-size: 1.2rem;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    font-weight: bold;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  }

  /* Pantalla de Ruleta */
  .ruleta-screen {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    padding: 40px;
    max-width: 600px;
    width: 100%;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    text-align: center;
  }

  .ruleta-container {
    margin: 40px 0;
  }

  .ruleta {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    position: relative;
    margin: 0 auto 30px;
    border: 8px solid #333;
    overflow: hidden;
    transition: transform 2s ease-out;
  }

  .ruleta.girando {
    animation: spin 2s linear infinite;
  }

  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .ruleta-inner {
    width: 100%;
    height: 100%;
    position: relative;
  }

  .sector {
    position: absolute;
    width: 50%;
    height: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
  }

  .paypal-sector {
    background: linear-gradient(135deg, #0070ba, #009cde);
    top: 0;
    left: 0;
    border-radius: 100% 0 0 0;
  }

  .visa-sector {
    background: linear-gradient(135deg, #1a1f71, #ff6b35);
    top: 0;
    right: 0;
    border-radius: 0 100% 0 0;
  }

  .color-indicator {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    margin-top: 5px;
  }

  .color-indicator.azul {
    background: #0070ba;
  }

  .color-indicator.rojo {
    background: #ff6b35;
  }

  .ruleta-pointer {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-top: 30px solid #333;
    z-index: 10;
  }

  .btn-ruleta {
    background: linear-gradient(135deg, #ff6b35, #f7931e);
    color: white;
    border: none;
    padding: 15px 30px;
    font-size: 1.2rem;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    font-weight: bold;
  }

  .btn-ruleta:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  }

  .btn-ruleta:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .equipo-asignado {
    margin-top: 30px;
    animation: fadeIn 0.5s ease-in;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .equipo-card {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 20px;
    border-radius: 15px;
    margin: 20px 0;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  }

  .equipo-card.equipo-azul {
    background: linear-gradient(135deg, #0070ba, #009cde);
  }

  .equipo-card.equipo-rojo {
    background: linear-gradient(135deg, #1a1f71, #ff6b35);
  }

  .color-badge {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    margin: 10px auto 0;
  }

  .color-badge.azul {
    background: #0070ba;
  }

  .color-badge.rojo {
    background: #ff6b35;
  }

  /* Pantalla de Trivia */
  .trivia-screen {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    padding: 40px;
    max-width: 800px;
    width: 100%;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  }

  .trivia-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding: 20px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border-radius: 15px;
  }

  .equipo-info h3 {
    margin-bottom: 5px;
  }

  .puntos {
    font-size: 1.2rem;
    font-weight: bold;
  }

  .progreso {
    text-align: right;
  }

  .progress-bar {
    width: 200px;
    height: 10px;
    background: rgba(255,255,255,0.3);
    border-radius: 5px;
    overflow: hidden;
    margin-top: 10px;
  }

  .progress-fill {
    height: 100%;
    background: white;
    transition: width 0.3s ease;
  }

  .pregunta-container h2 {
    color: #333;
    margin-bottom: 30px;
    font-size: 1.5rem;
    line-height: 1.4;
  }

  .opciones {
    display: grid;
    gap: 15px;
    margin-bottom: 30px;
  }

  .opcion-btn {
    background: white;
    border: 2px solid #ddd;
    padding: 15px 20px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
    font-size: 1rem;
    line-height: 1.4;
  }

  .opcion-btn:hover:not(:disabled) {
    border-color: #667eea;
    background: #f8f9ff;
  }

  .opcion-btn.selected {
    border-color: #667eea;
    background: #e8f0ff;
  }

  .opcion-btn.correct {
    border-color: #28a745;
    background: #d4edda;
    color: #155724;
  }

  .opcion-btn.incorrect {
    border-color: #dc3545;
    background: #f8d7da;
    color: #721c24;
  }

  .opcion-btn:disabled {
    cursor: not-allowed;
  }

  .explicacion {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    border-left: 4px solid #667eea;
  }

  .explicacion h4 {
    color: #333;
    margin-bottom: 10px;
  }

  .correcto {
    color: #28a745;
    font-weight: bold;
    margin: 10px 0;
  }

  .incorrecto {
    color: #dc3545;
    font-weight: bold;
    margin: 10px 0;
  }

  /* Pantalla de Resultados */
  .resultado-screen {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    padding: 40px;
    max-width: 800px;
    width: 100%;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    text-align: center;
  }

  .resultados-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 30px 0;
  }

  .equipo-resultado {
    animation: slideIn 0.5s ease-out;
  }

  @keyframes slideIn {
    from { opacity: 0; transform: translateX(-30px); }
    to { opacity: 1; transform: translateX(0); }
  }

  .puntos-finales {
    font-size: 2rem;
    font-weight: bold;
    margin: 10px 0;
  }

  .ganador {
    margin: 30px 0;
    animation: bounce 0.6s ease-in-out;
  }

  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
  }

  .ganador h2 {
    color: #28a745;
    font-size: 2rem;
    margin-bottom: 20px;
  }

  .trophy {
    font-size: 4rem;
    animation: rotate 2s linear infinite;
  }

  @keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .empate h2 {
    color: #ffc107;
    font-size: 2rem;
    margin-bottom: 20px;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .comparison-container {
      grid-template-columns: 1fr;
    }
    
    .trivia-header {
      flex-direction: column;
      gap: 15px;
    }
    
    .resultados-container {
      grid-template-columns: 1fr;
    }
    
    .header h1 {
      font-size: 2rem;
    }
    
    .ruleta {
      width: 250px;
      height: 250px;
    }
  }
</style>

